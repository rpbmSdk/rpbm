<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="rpbm_agent.VehiculeComponent">
        <div class="card" style="width: 50%;margin: 15px;">
            <div class="card-body" t-att-style="style">
                <h5 class="card-title">
                    <t t-esc="props.vehicule.libelleCourt"/>
                </h5>
            </div>
        </div>
    </t>

    <t t-name="rpbm_agent.CalqueComponent">
        <button t-attf-class="{{class}}" style="margin: 5px;">
            <t t-esc="props.calque.libelle"/>
        </button>
    </t>

    <t t-name="rpbm_agent.ArticleComponent">
        <div class="card" style="width:30%; margin: 5px;">
            <div class="card-body" t-att-style="style">
                <h5 class="card-title">
                    <t t-esc="props.article.libelle"/>
 -                    <t t-esc="props.article.code"/>
                </h5>
                <h6>
                    Prix: 
                    <t t-esc="props.article.prix"/>
    €
                    <br/>
    Coût: <t t-esc="props.article.prixVenteRPBM"/>
                </h6>
                <p t-if="props.article.available">
                    En stock: <t t-esc="props.article.prixVenteRPBM"/>
                </p>
            </div>
        </div>
    </t>

    <t t-name="rpbm_agent.PieceComponent">
        <div class="card" style="width:30%; margin: 5px;">
            <div class="card-body" t-att-style="style">
                <h5 class="card-title">
                    <t t-esc="props.piece.pieceOe.libelle"/>
                </h5>
                <p>
                    Prix: <t t-esc="props.piece.pieceOe.prix"/>
 €
                </p>
                <t t-if="props.piece.tempsList">
                    <t t-foreach="props.piece.tempsList" t-as="tempsList" t-key="tempsList.id">
                        <li>
                            <t t-esc="tempsList.operationTemps.libelle"/>
 :                            <t t-esc="tempsList.temps"/>
h | Taux : <t t-esc="tempsList.taux"/>
                        </li>
                    </t>
                </t>
                <ul>

                </ul>

            </div>
        </div>
    </t>

    <t t-name="rpbm_agent.AgentWidgetDialog">
        <Dialog size="lg" title="Agent">
            <label for="immatriculation">Immatriculation</label>
            <input class="o_input" id="immatriculation" placeholder="Immatriculation" t-ref="immatriculation" t-on-change="onChangeImmatriculation" style="text-transform: uppercase;margin: 10px;" />
            <button class="btn btn-primary" t-on-click="onSearchImmatriculation">
                Search
            </button>
            <t t-if="vehicules.length > 0">
                <t t-foreach="vehicules" t-as="vehicule" t-key="vehicule.id">
                    <VehiculeComponent vehicule="vehicule" selectedVehiculeId="selectedVehiculeId" t-on-click="()=>this.onSelectVehicule(vehicule.id)" />
                </t>
                <button t-if="selectedVehicule" class="btn btn-primary" t-on-click="getPlanche">
                    getPlanche
                </button>
                <t t-if="planche">
                    <div>
                        <t t-foreach="calques" t-as="calque" t-key="calque.id">

                            <!-- <button class="btn btn-primary" t-on-click="()=>this.onClickCalque(calque.id)">
                                <t t-esc="calque.libelle"/>
                            </button> -->
                            <CalqueComponent calque="calque" selectedCalqueId="selectedCalqueId" t-on-click="()=>this.onClickCalque(calque.id)" />
                        </t>

                        <!-- <select t-on-change="onChangeCalque" t-on-click.stop="() =&gt; {}" class="o_input pe-3">
                            <t t-foreach="calques" t-as="calque" t-key="calque.id">
                                <option t-att-value="calque.id">
                                    <t t-esc="calque.libelle"/>
                                </option>

                            </t>
                        </select> -->
                        <div>
                            <button t-if="selectedCalque" class="btn btn-primary" t-on-click="getPieces">
                            getPieces
                            </button>
                        </div>

                    </div>
                    <div>

                        <div t-if="pieces.length > 0" class="d-flex justify-content-between" style="flex-wrap: wrap;">
                            <t t-foreach="pieces" t-as="piece" t-key="piece.id">
                                <PieceComponent piece="piece" selectedPieceId="selectedPieceId" t-on-click="()=>this.onSelectPiece(piece.id)" />
                            </t>

                        </div>
                        <div t-if="selectedPiece">
                            <button class="btn btn-primary" t-on-click="getPieceAm">
                                    getPieceAm
                            </button>
                        </div>
                    </div>
                    <div t-if="selectedPiece">
                        <label for="baseEurocode">baseEurocode</label>
                        <input class="o_input" id="baseEurocode" placeholder="Base Eurocode" t-ref="baseEurocode" t-on-change="onChangeBaseEurocode" style="margin: 10px;" />
                        <button class="btn btn-primary" t-on-click="onSearchBaseEurocode">
                            Search
                        </button>
                    </div>

                    <div t-if="articlesVsf.length > 0">
                        <t t-foreach="articlesVsf" t-as="articleVsf" t-key="articleVsf.code">
                            <ArticleComponent article="articleVsf" selectedArticleId="selectedArticleId" t-on-click="()=>onClickArticleVsf(articleVsf.code)" />
                        </t>
                    </div>
                </t>
            </t>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onConfirm">
                    Confirm
                </button>
                <button class="btn btn-secondary" t-on-click="onDiscard">
                    Cancel
                </button>
            </t>
        </Dialog>
    </t>
</templates>